{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file://D%3A/coding/python/AI-final/frontend/src/app/clustering/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { FiArrowLeft, FiPieChart } from 'react-icons/fi';\r\n\r\ninterface ClusteringResult {\r\n  cluster_id: number;\r\n  data_points: Array<{[key: string]: number}>;\r\n  centroid: {[key: string]: number};\r\n}\r\n\r\nexport default function ClusteringPage() {\r\n  const [clusteringResults, setClusteringResults] = useState<ClusteringResult[]>([]);\r\n  const [clusteringImage, setClusteringImage] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchClusteringResults = async () => {\r\n      try {\r\n        // Fetch clustering results\r\n        const response = await fetch('http://localhost:8080/clustering/');\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch clustering results');\r\n        }\r\n        const data = await response.json();\r\n        setClusteringResults(data);\r\n        \r\n        // Fetch clustering visualization\r\n        const visResponse = await fetch('http://localhost:8080/visualizations/clustering');\r\n        if (visResponse.ok) {\r\n          const visData = await visResponse.json();\r\n          setClusteringImage(visData.data.image);\r\n        }\r\n      } catch (err) {\r\n        setError('Error fetching clustering results. Please make sure the backend server is running.');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchClusteringResults();\r\n  }, []);\r\n\r\n  const getRandomColor = (clusterId: number) => {\r\n    const colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#EC4899'];\r\n    return colors[clusterId % colors.length];\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <Link href=\"/\" className=\"flex items-center text-green-600 hover:text-green-800\">\r\n            <FiArrowLeft className=\"mr-2\" /> Back to Dashboard\r\n          </Link>\r\n        </div>\r\n        \r\n        <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\r\n          <div className=\"px-6 py-4 bg-green-700 text-white\">\r\n            <h1 className=\"text-xl font-semibold\">K-Means Clustering Analysis</h1>\r\n          </div>\r\n\r\n          <div className=\"p-6\">\r\n            {loading ? (\r\n              <div className=\"flex justify-center items-center h-64\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500\"></div>\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"p-6 bg-red-50 border border-red-200 rounded-md\">\r\n                <div className=\"text-red-700\">\r\n                  <p>{error}</p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-8\">\r\n                <div className=\"bg-gray-50 p-6 rounded-lg border border-gray-200\">\r\n                  <h2 className=\"text-xl font-semibold mb-4 flex items-center text-gray-800\">\r\n                    <FiPieChart className=\"mr-2\" /> Clustering Visualization\r\n                  </h2>\r\n                  {clusteringImage ? (\r\n                    <div className=\"bg-white p-4 border border-gray-200 rounded-lg\">\r\n                      <Image \r\n                        src={`data:image/png;base64,${clusteringImage}`} \r\n                        alt=\"K-Means Clustering Visualization\" \r\n                        className=\"mx-auto\"\r\n                        width={600}\r\n                        height={400}\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <p className=\"text-gray-500\">Visualization not available</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">Cluster Information</h2>\r\n                  \r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {clusteringResults.map((cluster) => (\r\n                      <div \r\n                        key={cluster.cluster_id}\r\n                        className=\"bg-white p-5 rounded-lg border border-gray-200 shadow-sm\"\r\n                        style={{ borderLeftWidth: '4px', borderLeftColor: getRandomColor(cluster.cluster_id) }}\r\n                      >\r\n                        <h3 className=\"text-lg font-medium mb-3\">\r\n                          Cluster {cluster.cluster_id}\r\n                        </h3>\r\n                        \r\n                        <div className=\"mb-3\">\r\n                          <h4 className=\"text-sm font-semibold text-gray-500 mb-1\">Centroid</h4>\r\n                          <div className=\"grid grid-cols-2 gap-2\">\r\n                            {Object.entries(cluster.centroid).slice(0, 6).map(([key, value]) => (\r\n                              <div key={key} className=\"text-sm\">\r\n                                <span className=\"text-gray-500\">{key.replace('feature_', 'F')}:</span>{' '}\r\n                                <span className=\"font-medium\">{value.toFixed(2)}</span>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <div>\r\n                          <h4 className=\"text-sm font-semibold text-gray-500 mb-1\">\r\n                            Data Points: {cluster.data_points.length}\r\n                          </h4>\r\n                          <p className=\"text-sm text-gray-600\">\r\n                            This cluster contains {cluster.data_points.length} apartment listings with similar characteristics.\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"bg-green-50 p-6 rounded-lg border border-green-200\">\r\n                  <h3 className=\"text-lg font-semibold text-green-800 mb-2\">\r\n                    Clustering Analysis\r\n                  </h3>\r\n                  <p className=\"text-gray-700\">\r\n                    K-Means clustering has grouped together similar apartment listings based on their features.\r\n                    Each cluster represents a distinct segment of the apartment market with similar characteristics.\r\n                  </p>\r\n                  <p className=\"mt-3 text-gray-700\">\r\n                    These clusters can be used to better understand the apartment rental market segments,\r\n                    identify target demographics, and optimize pricing strategies for different types of apartments.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}