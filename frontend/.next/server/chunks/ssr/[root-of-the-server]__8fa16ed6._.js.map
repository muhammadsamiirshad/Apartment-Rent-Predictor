{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://D%3A/coding/python/AI/frontend/src/app/models/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\nimport { FiArrowLeft, FiBarChart2 } from 'react-icons/fi';\r\n\r\ninterface ModelMetrics {\r\n  algorithm: string;\r\n  accuracy: number;\r\n  precision: number;\r\n  recall: number;\r\n  f1_score: number;\r\n}\r\n\r\nexport default function ModelsPage() {\r\n  const [metrics, setMetrics] = useState<ModelMetrics[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [comparisonImage, setComparisonImage] = useState<string | null>(null);\r\n  const [featureImportanceImage, setFeatureImportanceImage] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchModelMetrics = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:8080/model-metrics/');\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch model metrics');\r\n        }\r\n        const data = await response.json();\r\n        setMetrics(data);\r\n        \r\n        // Fetch model comparison visualization\r\n        const comparisonResponse = await fetch('http://localhost:8080/visualizations/model_comparison');\r\n        if (comparisonResponse.ok) {\r\n          const comparisonData = await comparisonResponse.json();\r\n          setComparisonImage(comparisonData.data.image);\r\n        }\r\n        \r\n        // Fetch feature importance visualization\r\n        const importanceResponse = await fetch('http://localhost:8080/visualizations/feature_importance');\r\n        if (importanceResponse.ok) {\r\n          const importanceData = await importanceResponse.json();\r\n          setFeatureImportanceImage(importanceData.data.image);\r\n        }\r\n      } catch (err) {\r\n        setError('Error fetching model metrics. Please make sure the backend server is running.');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchModelMetrics();\r\n  }, []);\r\n\r\n  const getBestModel = () => {\r\n    if (metrics.length === 0) return null;\r\n    return metrics.reduce((best, current) => \r\n      current.f1_score > best.f1_score ? current : best\r\n    );\r\n  };\r\n\r\n  const bestModel = getBestModel();\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <Link href=\"/\" className=\"flex items-center text-purple-600 hover:text-purple-800\">\r\n            <FiArrowLeft className=\"mr-2\" /> Back to Dashboard\r\n          </Link>\r\n        </div>\r\n        \r\n        <div className=\"bg-white shadow-md rounded-lg overflow-hidden\">\r\n          <div className=\"px-6 py-4 bg-purple-700 text-white\">\r\n            <h1 className=\"text-xl font-semibold\">Model Comparison and Evaluation</h1>\r\n          </div>\r\n\r\n          <div className=\"p-6\">\r\n            {loading ? (\r\n              <div className=\"flex justify-center items-center h-64\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500\"></div>\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"p-6 bg-red-50 border border-red-200 rounded-md\">\r\n                <div className=\"text-red-700\">\r\n                  <p>{error}</p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-8\">\r\n                <div>\r\n                  <h2 className=\"text-xl font-semibold mb-4 flex items-center text-gray-800\">\r\n                    <FiBarChart2 className=\"mr-2\" /> Evaluation Metrics\r\n                  </h2>\r\n                  \r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full bg-white\">\r\n                      <thead>\r\n                        <tr className=\"bg-gray-100\">\r\n                          <th className=\"py-3 px-4 text-left font-semibold\">Algorithm</th>\r\n                          <th className=\"py-3 px-4 text-left font-semibold\">Accuracy</th>\r\n                          <th className=\"py-3 px-4 text-left font-semibold\">Precision</th>\r\n                          <th className=\"py-3 px-4 text-left font-semibold\">Recall</th>\r\n                          <th className=\"py-3 px-4 text-left font-semibold\">F1 Score</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {metrics.map((model, index) => (\r\n                          <tr \r\n                            key={model.algorithm}\r\n                            className={`${index % 2 === 0 ? 'bg-white' : 'bg-gray-50'} ${\r\n                              bestModel && model.algorithm === bestModel.algorithm ? 'bg-green-50' : ''\r\n                            }`}\r\n                          >\r\n                            <td className=\"py-3 px-4 border-b\">\r\n                              {model.algorithm}\r\n                              {bestModel && model.algorithm === bestModel.algorithm && (\r\n                                <span className=\"ml-2 text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full\">Best Model</span>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"py-3 px-4 border-b\">{(model.accuracy * 100).toFixed(2)}%</td>\r\n                            <td className=\"py-3 px-4 border-b\">{(model.precision * 100).toFixed(2)}%</td>\r\n                            <td className=\"py-3 px-4 border-b\">{(model.recall * 100).toFixed(2)}%</td>\r\n                            <td className=\"py-3 px-4 border-b\">{(model.f1_score * 100).toFixed(2)}%</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n\r\n                {comparisonImage && (\r\n                  <div>\r\n                    <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">Models Performance Comparison</h2>\r\n                    <div className=\"bg-white p-4 border border-gray-200 rounded-lg\">\r\n                      <Image \r\n                        src={`data:image/png;base64,${comparisonImage}`} \r\n                        alt=\"Model Comparison Visualization\" \r\n                        className=\"mx-auto\"\r\n                        width={800}\r\n                        height={600}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {featureImportanceImage && (\r\n                  <div>\r\n                    <h2 className=\"text-xl font-semibold mb-4 text-gray-800\">Feature Importance</h2>\r\n                    <div className=\"bg-white p-4 border border-gray-200 rounded-lg\">\r\n                      <Image \r\n                        src={`data:image/png;base64,${featureImportanceImage}`} \r\n                        alt=\"Feature Importance Visualization\" \r\n                        className=\"mx-auto\"\r\n                        width={800}\r\n                        height={600}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {bestModel && (\r\n                  <div className=\"bg-green-50 p-6 rounded-lg border border-green-200\">\r\n                    <h3 className=\"text-lg font-semibold text-green-800 mb-2\">\r\n                      Model Recommendation\r\n                    </h3>\r\n                    <p className=\"text-gray-700\">\r\n                      Based on the evaluation metrics, the <span className=\"font-semibold\">{bestModel.algorithm}</span> model \r\n                      performs best with an F1 score of {(bestModel.f1_score * 100).toFixed(2)}%.\r\n                    </p>\r\n                    <p className=\"mt-3 text-gray-700\">\r\n                      This model balances precision ({(bestModel.precision * 100).toFixed(2)}%) and \r\n                      recall ({(bestModel.recall * 100).toFixed(2)}%) well, making it optimal for apartment rental classification.\r\n                      The F1 score is used as the main metric because it provides a balance between precision and recall.\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}